console.log("Runing Program");const onlyScheduled=false;const onlyRandom=false;const autoMode=false;const everyS=3600000;const phrases=["Some Random Phrase","Another Random Phrase"];const schePhrases=[{phrase:"Some Scheduled Phrase",time:12,},{phrase:"Another Scheduled Phrase",time:22,},{phrase:"An extra phrase as example of scheTime",time:12,},];const scheTime=[12,22];const keyWord="hey, ";const chats=[{ask:"question",answers:["question answer 1","question answer 2","question answer 3",],},];var list_container;var lastMsg;var cache=[];var cacheLimit=phrases.length;var diff=false;var chosenPhrase=0;var msgInput;count=0;const eventInput=new InputEvent("input",{bubbles:true,});const getTime=()=>new Date(Date.now()).getHours();function randInt(min,max){min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min+1))+min;};function isDiff(phrase,che){for(i=0;i<che.length;i++){if(che[i]==phrase)return false;};return true;};function selectPhrase(){diff=false;let count=0;while(!diff){chosenPhrase=randInt(0,phrases.length);isDiff(chosenPhrase,cache)?(diff=true):(diff=false);count++;if(count==100)diff=true;}};function checkcache(){if(cache.length<cacheLimit){cache.push(chosenPhrase);}else{cache=[];cache.push(chosenPhrase);};console.log("valor de cache: ",cache);};function sendMsg(input){input.dispatchEvent(eventInput);input.dispatchEvent(eventInput);input.dispatchEvent(eventInput);setTimeout(()=>{document.querySelector("button._4sWnG").click();},500)};function writeAndSendMsg(phrase){msgInput.textContent=phrase;sendMsg(msgInput);};function sendScheduledMessages(hour){let schePhrase=schePhrases.filter((phrase)=>Number(phrase.time)==hour);schePhrase.forEach((p)=>setTimeout(()=>writeAndSendMsg(p.phrase),2000));};function whatsappBot(){let time=getTime();console.groupCollapsed("Message ["+count+"]");console.log("=======================================");console.log("\nSelecting Message... \n\n");if(onlyRandom){selectPhrase();checkcache();};console.log("\tChosen phrase: "+phrases[chosenPhrase]);console.log("\tWriting...");if(onlyScheduled&&everyS<=3600000){scheTime.includes(time.toString())?sendScheduledMessages(time):writeAndSendMsg(phrases[chosenPhrase]);}else{onlyRandom?writeAndSendMsg(phrases[chosenPhrase]):null;};console.log("\n\n Sent!");count++;console.groupEnd();};function stopBot(){clearInterval(bot);console.log("Bot stoped");count=0;};function startBot(){if(onlyRandom){console.groupCollapsed("Message ["+count+"]");console.log("=======================================");console.log("\nSelecting Message... \n\n");selectPhrase();checkcache();console.log("\tChosen phrase: "+phrases[10]);console.log("\tWriting...");writeAndSendMsg(phrases[chosenPhrase]);console.log("\n\n Sent!");console.groupEnd();};if(onlyScheduled){let time=getTime();if(everyS<=3600000){console.log("agendado");if(scheTime.includes(time))sendScheduledMessages(time);}else{alert("You MUST select less than 1 hour between messages on 'onlyScheduled' mode!");alert("The bot wont send scheduled messages until you change the time or disable the onlyschedule mode");}};bot=setInterval(whatsappBot,everyS);console.log("Bot Initialized");};function checkInput(bot,ia){isReady=setInterval(()=>{if(typeof msgInput!="undefined"&&typeof list_container!=("undefined"||null)){console.groupCollapsed("check Input");console.log("Found input");console.log(msgInput);console.groupEnd();if(ia)startAI();if(bot)startBot();clearInterval(isReady);}else{list_container=document.querySelector('[aria-label="Message list. Press right arrow key on a message to open message context menu."]');document.querySelectorAll("._13NKt.copyable-text.selectable-text").forEach((e)=>{e.hasAttribute("spellcheck")?(msgInput=e):null;});}},2000)};function startAI(){list_container.addEventListener("DOMNodeInserted",(input)=>getLastMsg(input),false);};function getLastMsg(input){let e=input.target;if(e==list_container.lastElementChild){if(e.classList.toString().includes("message-in focusable-list-item")){lastMsg=e.innerText.slice(0,e.innerText.lastIndexOf("\n"));answerMsg(lastMsg);}}else{}};var lastMsgSent=undefined;function answerMsg(message){let msg=message.toString().toLowerCase();let exist=false;if(msg.slice(0,keyWord.length).includes(keyWord)){chats.forEach((chat,i)=>{if(msg.includes(chat.ask.toLowerCase())){setTimeout(()=>{let answer=randInt(0,chat.answers.length);let flag={value:true,count:0};if(lastMsgSent!=undefined){while(answer==lastMsgSent&&flag.value){answer=randInt(0,chat.answers.length);flag.count++;if(flag.count==100)flag.value=false;}};if(answer!=lastMsgSent)lastMsgSent=answer;writeAndSendMsg(chat.answers[answer]);},1000);exist=true;}});};if(!exist&&msg.slice(0,keyWord.length).includes(keyWord)){setTimeout(()=>{writeAndSendMsg("Perdon Amorcito, no entendi la respuesta TE AMO <3");},3000);}};function main(){if(onlyRandom||onlyScheduled&&autoMode){checkInput(true,true)}else if(!onlyRandom&&!onlyScheduled&&autoMode){checkInput(false,true)}else if(!onlyRandom&&!onlyScheduled&&!autoMode){alert("No mode selected!");}};main();